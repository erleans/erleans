%% -*- erlang -*-
{erl_opts,
 [debug_info,
  warn_untyped_record]}.

{cover_enabled, true}.
{cover_opts, [verbose]}.
{cover_export_enabled, true}.
{covertool, [{coverdata_files, ["ct.coverdata"]}]}.

{deps, [gproc,
        erlware_commons,
        types,
        sbroker,
        opentelemetry_api,
        gen_cluster,
        {uuid, {pkg, uuid_erl}},

        {eqwalizer_support,
         {git_subdir,
          "https://github.com/whatsapp/eqwalizer.git",
          {branch, "main"},
          "eqwalizer_support"}}]}.

{profiles, [{test, [{erl_opts, [nowarn_export_all]},
                    {dist_node, [{sname, 'ct@rosa'}]}]}]}.

{ct_opts, [{sys_config, "test/sys.config"}]}.

{project_plugins,
 [rebar_alias,
  covertool,
  {eqwalizer_rebar3,
   {git_subdir,
    "https://github.com/whatsapp/eqwalizer.git",
    {branch, "main"},
    "eqwalizer_rebar3"}}]}.

{alias, [{test, [ct]},
         {check, [ct, xref, dialyzer, cover]}]}.

{dist_node, [{name, 'erleans@127.0.0.1'}]}.
{shell, [{apps, [erleans]},
         {config, "config/sys.config"}]}.

{xref_checks, [undefined_function_calls, undefined_functions,
               deprecated_function_calls, deprecated_functions]}.

